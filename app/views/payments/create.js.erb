
console.log('Stripe Key:', '<%= Rails.application.credentials.stripe[:publishable_key] %>');

<% if @session.id.present? %>
  var stripe = Stripe('<%= Rails.application.credentials.stripe[:publishable_key] %>');
  stripe.redirectToCheckout({
    sessionId: '<%= @session.id %>'
  }).then(function (result) {
    // If `redirectToCheckout` fails due to a browser or network
    // error, you should display the localized error message to your
    // customer using `result.error.message`.
    if (result.error) {
      alert(result.error.message);
    }
  });
<% else %>
  // Handle error or inform the user that something went wrong
  alert('There was an issue initializing the payment process. Please try again.');
<% end %>
